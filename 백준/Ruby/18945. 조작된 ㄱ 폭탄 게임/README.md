# [Ruby III] 조작된 ㄱ 폭탄 게임 - 18945 

[문제 링크](https://www.acmicpc.net/problem/18945) 

### 성능 요약

메모리: 153324 KB, 시간: 2360 ms

### 분류

자료 구조, 게임 이론, 하켄부시 게임, 세그먼트 트리

### 제출 일자

2023년 2월 19일 02:20:31

### 문제 설명

<p>Ahgus 와 Bagus는 ㄱ 폭탄 게임을 하려고 한다.</p>

<p>ㄱ폭탄 게임은 <em>N</em>개의 게임판에서 진행된다. <em>i</em>번째 게임판은 가로와 세로의 길이가 각각 <em>R<sub>i</sub></em>, <em>C<sub>i</sub></em>이고 1×1 정사각형 칸으로 이루어진 직사각형 모양이다.</p>

<p>게임판의 각 칸에는 ㄱ 폭탄이 하나씩 놓여 있으며, 폭탄에는 총 세 개의 모양 A, B, C가 존재한다. A 폭탄은 Ahgus만 선택할 수 있고, B 폭탄은 Bagus만 선택할 수 있으며, C 폭탄은 누구도 선택할 수 없다.</p>

<p>ㄱ 폭탄은 터질 때 자신의 왼쪽과 아래쪽 칸의 폭탄을 점화한다. 점화된 폭탄은 곧 폭발하고, 그 왼쪽과 아래쪽에 있는 폭탄을 다시 점화하게 된다. 예를 들어 게임판의 가장 오른쪽 위 칸의 폭탄을 터뜨리면 모든 칸의 폭탄이 터지게 된다. 이렇게 연쇄적인 과정 끝에 더 이상 폭발하는 폭탄이 발생하지 않으면 해당 플레이어의 턴이 끝난다.</p>

<p>모든 게임은 Ahgus부터 시작하며 두 사람이 순서대로 한 턴씩 진행하고, 각 사람은 자신의 턴에 남아있는 폭탄 중 하나를 선택해 터뜨린다. 이때 자신의 턴에 터트릴 수 있는 폭탄이 더 이상 남아있지 않는 사람이 패배하게 된다.</p>

<p>두 사람은 게임에서 이기기 위해 몇몇 폭탄을 바꿔치기했고, 각 게임판에서 A와 B중 한 종류 이상의 폭탄은 단 한 개만 존재하게 되었다.</p>

<p>이를 지켜보던 연금술사 stonejjun이 나타나 총 <em>T</em>판의 게임을 진행할 것을 제안했다. 그는 각 게임마다 <em>K</em>번 게임판을 선택해 A 폭탄은 B 폭탄으로, B 폭탄은 A 폭탄으로 바꿔치기하고, 두 정수 <em>U</em>와 <em>V</em>에 대해 번호가 <em>U</em> 이상 <em>V</em> 이하인 게임판만을 사용할 수 있도록 나머지 게임판을 숨길 것이다.</p>

<p>그의 횡포에 화가 난 Ahgus와 Bagus는 게임을 하지 않고 승자를 결정하려고 한다. 만약 두 사람 모두 이기기 위한 최선의 선택을 할 경우, 각 게임마다 누가 이기게 될지 구해보자!</p>

### 입력 

 <p>첫째 줄에는 게임판의 수 <em>N</em>이 주어진다.</p>

<p>그 후 각 <em>N</em>개의 게임판에 대해서 한 줄에 두 양의 정수 <em>R<sub>i</sub></em>, <em>C<sub>i</sub></em>가 주어진다.</p>

<p>그 아래 세로 <em>R<sub>i</sub></em>, 가로 <em>C<sub>i</sub></em> 개의 문자로 <em>i</em>번째 게임판이 주어진다. 게임판은 가장 왼쪽 위의 칸부터 주어진다.</p>

<p>그 다음 줄에는 둘이 진행할 게임의 수 <em>T</em>가 주어진다.</p>

<p>이후 <em>T</em>개의 줄에 걸쳐 세 양의 정수 <em>K</em>, <em>U</em>, <em>V</em> 가 주어진다.</p>

### 출력 

 <p>T판의 각 게임별로 이기게 될 사람의 이름 Ahgus 또는 Bagus를 한 줄에 출력한다.</p>

